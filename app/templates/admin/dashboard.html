{% extends "base.html" %}
{% block content %}
<div class="max-w-7xl mx-auto mt-12 px-4">

  <!-- ðŸ§  TÃ­tulo -->
  <h2 class="text-3xl font-bold text-[#003DA5] mb-10 text-center">
    {{ t["admin_dashboard"] }}
  </h2>

  <!-- ðŸ“Š EstadÃ­sticas (estÃ¡ticas) -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12 text-center">
    {% set stats = [
      ("totalUsers.png", t["total_users"], total_users),
      ("totalClients.png", t["total_clients"], total_clients),
      ("totalEmployees.png", t["total_employees"], total_employees),
      ("totalReservations.png", t["total_reservations"], total_reservations)
    ] %}
    {% for icon, label, value in stats %}
    <div class="bg-white p-6 rounded-lg shadow">
      <div class="bg-blue-50 p-4 rounded-full inline-block mb-4">
        <img src="{{ url_for('static', filename='img/' ~ icon) }}"
             alt="{{ label }}" class="w-8 h-8">
      </div>
      <p class="text-sm text-gray-500 mb-2">{{ label }}</p>
      <p class="text-2xl font-bold text-blue-800">{{ value }}</p>
    </div>
    {% endfor %}
  </div>

  <!-- ðŸš€ Accesos RÃ¡pidos (clicables) -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
    {% set cards = [
      ("assignEmployees.png", url_for('admin.assign_employees'), "assign_employees",       "assign_employees_desc"),
      ("userManagement.png",  url_for('admin.users'),            "user_management",     "user_management_desc")
    ] %}
    {% for icon, href, title_key, desc_key in cards %}
    <a href="{{ href }}"
       class="block bg-white p-6 rounded-lg shadow
              cursor-pointer transform transition
              hover:-translate-y-1 hover:shadow-xl
              text-center">
      <div class="bg-purple-50 p-4 rounded-full inline-block mb-4">
        <img src="{{ url_for('static', filename='img/' ~ icon) }}"
             alt="{{ t[title_key] }}" class="w-8 h-8">
      </div>
      <h3 class="text-lg font-semibold text-blue-700 mb-2">
        {{ t[title_key] }}
      </h3>
      <p class="text-sm text-gray-600">
        {{ t[desc_key] }}
      </p>
    </a>
    {% endfor %}
  </div>

  <!-- ðŸ“‹ Servicios Pendientes -->
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-xl font-semibold text-[#003DA5]">{{ t["pending_services"] }}</h3>
    {% if pending_services %}
      <form method="POST" action="{{ url_for('admin.accept_all_services') }}">
        <button type="submit"
                class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 text-sm shadow transition">
          âœ… {{ t["accept_all"] }}
        </button>
      </form>
    {% endif %}
  </div>

  {% if pending_services %}
    <div class="overflow-x-auto bg-white shadow rounded-lg">
      <table class="min-w-full table-auto text-sm text-left">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2 font-semibold text-gray-600">{{ t["client"] }}</th>
            <th class="px-4 py-2 font-semibold text-gray-600">{{ t["service_type"] }}</th>
            <th class="px-4 py-2 font-semibold text-gray-600">{{ t["date"] }}</th>
            <th class="px-4 py-2 font-semibold text-gray-600">{{ t["time"] }}</th>
            <th class="px-4 py-2 text-center font-semibold text-gray-600">{{ t["actions"] }}</th>
          </tr>
        </thead>
        <tbody>
          {% for r in pending_services %}
          <tr class="border-t hover:bg-gray-50 transition">
            <td class="px-4 py-2">{{ r.user.name }}</td>
            <td class="px-4 py-2">{{ t["service_type_labels"][r.service_type] }}</td>
            <td class="px-4 py-2">{{ r.date.strftime('%Y-%m-%d') }}</td>
            <td class="px-4 py-2">{{ r.time.strftime('%H:%M') }}</td>
            <td class="px-4 py-2 text-center">
              <form method="POST" action="{{ url_for('admin.accept_service', id=r.id) }}">
                <button type="submit"
                        class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 text-xs shadow transition">
                  {{ t["accept"] }}
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="text-center text-gray-500 mt-6">{{ t["no_pending_services"] }}</p>
  {% endif %}

</div>
{% endblock %}
